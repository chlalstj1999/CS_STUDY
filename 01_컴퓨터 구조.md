# CHAPTER 01_컴퓨터 구조
### **💜 컴퓨터 구조의 큰 그림**
### <컴퓨터가 이해하는 정보>

`데이터`
숫자, 문자, 이미지, 동영상과 같은 정적인 정보  
`명령어`
데이터를 활용하는 정보

**❗️ 데이터는 명령어에 종속적인 정보이며, 명령의 대상이자, 명령어의 재료**

#### ✅ 컴퓨터는 0과 1만을 이해할 수 있음   
  ➡️ 데이터와 명령어 또한 0과 1로 이루어져 있음
#### ✅ 명령어를 실행하는 주체 = CPU  
  ➡️ CPU의 종류에 따라 실행 가능한 명령어 종류와 처리 양상이 달라질 수 있음

---

### <컴퓨터의 핵심 부품>

#### 1. CPU : 데이터와 명령어를 읽어 들이고, 해석하고 실행하는 부품
| 장치 | 역할 |
|---|---|
| 1. 산술논리연산장치<br/>(ALU, Arithmetic and Logic Unit) | - 일종의 계산기 |
| 2. 제어장치<br/>(CU, Control Unit) | - 명령어를 해석해 제어 신호를 내보내는 장치 |
| 3. 레지스터<br/>(register) | - CPU 내부의 작은 임시 저장장치 |

#### 2. 메모리와 캐시 메모리
✅ RAM
- 실행 중인 프로그램을 구성하는 데이터와 명령어를 저장하는 부품
- `주소` CPU가 메모리에 접근할 때 빠르게 작동하기 위해 필요한 개념
- `휘발성` 전원이 공급되지 않을 때 저장하고 있는 정보가 지워지는 특성

✅ 캐시 메모리
- CPU와 메모리 사이에는 반드시 하나 이상의 캐시 메모리 존재
- 빠른 메모리 접근을 보조하는 저장장치
#### 3. 보조기억장치
- 비휘발성 저장장치
- 하드 디스크, SSD, USB, SD 카드 등
- 보관할 프로그램 저장   

**❗️ CPU가 보조기억장치에 저장된 프로그램을 곧장 가져와 실행할 수 없음**

#### 4. 입출력장치
- 컴퓨터 외부에 연결되어 컴퓨터 내부와 정보를 교환하는 장치
- 마우스, 키보드, 마이크 (입력장치)
- 스피커, 모니터, 프린터 (출력장치)

#### 5. 메인 보드와 버스
`메인 보드 or 마더 보드` 부품들을 고정하고 연결하는 기판   
`버스` 각 컴퓨터 부품들이 정보를 주고받는 통로   
`시스템 버스` 핵심 부품들을 연결하는 시스템 버스

![메인 보드와 버스](./image/메인보드와%20버스.png)

### 🙌 저장장치의 계층 구조
1. CPU와 가까운 저장장치는 빠르고, 멀리 있는 저장장치는 느림
2. 속도가 빠른 저장장치는 용량이 작고, 가격이 비쌈

![](./image/저장장치의%20계층%20구조.png)

---

### **💜컴퓨터가 이해하는 정보**

`bit` 
- '0'과 '1'을 나타내는 가장 작은 정보의 단위
- N비트 = 2^N개의 정보

|구분|비트|
|---|---|
|1 byte|8 bit|
|1 kB|1000 byte|
|1 MB|1000 KB|
|1 GB|1000 MB|
|1 TB|1000 GB|

⬆️ 프로그램 관점에서 본 정보 단위   
⬇️ CPU 관점에서 본 정보 단위

`word`

- CPU가 한 번에 처리할 수 있는 데이터의 크기
- 현대 컴퓨터는 대부분 32bit or 64bit

---

### <데이터 - 0과 1로 숫자 표현하기>
`2진법` 숫자 1을 넘어가는 시점에 자리올림   
`부동 소수점` 소수점이 유동적   

✅ IEEE 754 (부동 소수점 저장 방식)
![](./image/floatingpoint.png)
- 지수 : 바이어스값(=2^(k-1)-1) + 지수
- 갸수 : 정수부는 정규화된 1의 값이 들어감. 따라서 소수 부분만 저장

---

### <데이터 - 0과 1로 문자 표현하기>
`encoding` : 0과 1로 이루어진 문자 코드로 변환하는 과정
`decoding` : 사람이 이해하는 문자로 변환하는 과정

1. ASCII : 8bit로 표현. 이 중 1bit = parity bit (오류 검출 비트)
2. EUC-KR : 한글 인코딩 방식 중 하나
3. unicode : 통일된 문자 집합 

---

### <명령어>
`연산 코드` : 명령어가 수행할 동작   
| 유형 | 연산 코드 | 설명 |
|-----|-----|-----|
|데이터 전송|MOVE|데이터를 옮겨라|
||STORE|메모리에 저장해라|
||LOAD(FETCH)|데이터를 메모리에서 CPU로 가져와라|
||PUSH|데이터를 스택에 저장해라|
||POP|스택의 최상단 데이터를 가져와라|
|산술/논리 연산|ADD/SUBTRACT/<br/>MULTIPLY/DIVIDE|사칙연산을 수행하라|
||INCREMENT<br/>DECREMENT|오퍼랜드에 1을 더해라<br/>오퍼랜드에 1을 빼라|
||AND/OR/NOT|AND/OR/NOT 연산을 수행하라|
||COMPARE|값을 비교해라|
|제어 흐름 변경|JUMP|특정 주소로 실행 순서를 옮겨라|
||CONDITIONAL JUMP|조건에 부합할 경우 특정 주소로 실행 순서를 옮겨라|
||HALT|프로그램의 실행을 멈춰라|
||CALL|돌아올 주소를 저장한 채 특정 주소로 실행 순서를 옮겨라|
||RETURN|CALL을 호출할 때 저장했던 주소로 돌아가라|
|입출력 제어|READ(INPUT)|데이터를 읽어라|
||WRITE(OUTPUT)|데이터를 써라|
||START IO|입출력장치를 시작해라|
||TEST IO|입출력장치의 현재 상태를 확인하라|

`오퍼랜드` : 동작에 사용될 데이터 or 동작에 사용될 데이터가 저장된 위치


`기계어` : '0'과 '1'을 있는 그대로 표현한 언어   
`어셈블리어` : 기계어를 읽기 편한 형태로 단순 번역한 언어

✅ 명령어 사이클 : 명령어들이 반복하며 실행되는 주기   
`인출 사이클` : 명령어를 CPU로 가져오는 단계   
`실행 사이클` : 명령어를 실행하는 단계   
`간접 사이클` : 명령어를 실행하기 위해 한 번 더 메모리에 접근하는 단계

---

### **💜 CPU**
### <레지스터>
`프로그램 카운터 (PC)` : 메모리에서 다음으로 읽어 들일 명령어의 주소를 저장   
`명령어 레지스터 (IR)` : 해석할 명령어 저장   
`범용 레지스터 (general purpose register)` : 자유롭게 사용 가능  
`플래그 레지스터 (flag register)` : flag값 저장  
|종류|설명|
|---|---|
|부호 플래그|연산 결과의 부호|
|제로 플래그|연산 결과가 0인지 여부|
|캐리 플래그|올림수나 빌림수가 발생했는지 여부|
|오버플로우 플래그|오버플러그가 발생했는지 여부|
|인터럽트 플래그|인터럽트가 가능한지 여부|
|슈펴바이저 플래그|커널 모드로 실행 중인지, 사용자 모드로 실행 중인지 여부|

`스택 포인터` : 최상단 스택 데이터 위치를 가리킴

---

### <인터럽트>
`인터럽트` : CPU의 작업을 방해하는 신호

✅ 동기 인터럽트
- CPU에 의해 발생
- 프로그래밍 오류와 같은 예외적인 상황을 마주쳤을 때 발생
  - `폴트(fault)` : 예외가 발생한 명령어부터 실행 재개
  - `트랩(trap)` : 예외가 발생한 다음 명령어부터 실행 재개
  - `중단(abort` : 프로그램 강제 중단할 수 밖에 없는 심각한 오류를 발견했을 경우
  - `소프트웨어 인터럽트` : 시스템 콜이 발생했을 경우

✅ 비동기 인터럽트

- 입출력장치에 의해 발생
- 알림의 역할
- `폴링(polling)` : 입출력 상태가 어떤지, 처리할 데이터가 있는지 주기적으로 확인하는 것
- 처리순서
  1) 입출력장치는 CPU에게 인터럽트 요청 신호를 보냄
  2) CPU는 실행 사이클이 끝나고 항상 인터럽트 여부 확인
  3) 인터럽트 플래그 확인
  4) 인터럽트 플래그가 '1'이면 지금까지 작업 백업
  5) 인터럽트 벡터를 참조하여 인터럽트 서비스 루틴 실행
  6) 인터럽트 서비스 루틴이 끝나면 백업해 둔 작업을 복구하여 실행 재개
- `인터럽트 요청 신호` : CPU에게 인터럽트 가능 여부 확인하기 위한 신호   
**❗️인터럽트 플래그로 막을 수 있는 인터럽트와 막을 수 없는 인터럽트가 있음**
- `인터럽트 서비스 루틴 = 인터럽트 핸들러` : 인터럽트를 어떻게 처리하고 작동할지에 대한 정보로 이루어진 프로그램 
- `인터럽트 벡터` : 인터럽트 서비스 루틴의 시작 주소를 포함한 인터럽트 서비스 루틴을 식별하기 위한 정보
- 현재 프로그램을 재개하기 위해 필요한 모든 내용을 스택에 백업 ex) 프로그램 카운터 값 등

---

### <CPU 성능 향상을 위한 설계>

✅ CPU 클럭 속도   

`클럭` : 컴퓨터의 부품을 일사불란하게 움직일 수 있게 하는 시간의 단위
- 클럭 속도 = Hz   
❗️ 클럭 속도를 필요 이상으로 높으면 컴퓨터의 발열 발생

`멀티코어와 멀티스레드`   
✅ `코어` : CPU 내에서 명령어를 읽어 들이고, 해석하고, 실행하는 부품   
✅ `멀티코어 CPU or 멀티코어 프로세서` : 어려개의 코어를 포함하고 있는 CPU

✅ `thread` : 실행 흐름의 단위
- 하드웨어적인 스레드 : 하나의 코어가 동시에 처리하는 명령어의 단위 = 논리 프로세서
- 소프트웨어적인 스레드 : 하나의 프로그램에서 독립적으로 실행되는 단위   

`병렬성` : 작업을 물리적으로 동시에 처리 ex) 스레드가 4개인 CPU   
`동시성` : 동시에 작업을 처리하는 것처럼 보임

---

### <파이프라닝을 통한 명령어 병렬 처리>
